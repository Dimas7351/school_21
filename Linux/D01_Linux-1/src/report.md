## Part 1.Установка ОС
1. Узнаем версию Ubuntu после установки, выполнив команду: `cat /etc/issue.` <br>
![Alt text](./1.png "Optional Title")<br>

## Part 2. Создание пользователя
1.  Создадим пользователя second_admin и добавим его в группу adm: <br>
![](2.0.png)

2. Проверим добавление нового пользователя в файле `/etc/passwd`<br>
![](2.1.png)

## Part 3. Настройка сети ОС
1. Было задано название машины вида user-1: <br>
![](3.1.png) <br>
2. Установил временную зону, соответствующую текущему местоположению: <br>
![](3.2.png)

3. Вывод названия сетевых интерфейсов: <br>
![](3.3.png)

- `lo (loopback device) – виртуальный интерфейс, присутствующий по умолчанию в любом Linux. Он используется для отладки сетевых программ и запуска серверных приложений на локальной машине. С этим интерфейсом всегда связан адрес 127.0.0.1. У него есть dns-имя – localhost.`

4. Получил ip адрес устройства от DHCP сервера: <br>
![](3.4.png)

- `DHCP (англ. Dynamic Host Configuration Protocol протокол динамической конфигурации узла) это сетевой протокол, позволяющий компьютерам автоматически получать IP-адрес и другие параметры, необходимые для работы в сети TCP/IP`

5. Вывел внешний ip-адрес шлюза (ip) с помощью команды `curl ifconfig.me/ip`, которая отправляет GET-запрос на сайт и считывает с него необходимую инфомацию, а также внутренний IP-адрес шлюза с помощью команды `ip route` <br>
![](3.5.png)

6. Установка статических настроек ip, gw, dns <br>
- С помощью команды sudo vim /etc/netplan/00-installer-config.yaml получил доступ к файлу конфигурации <br>
![](3.6.png) <br>

- После чего в этом файле сделал `dhcp4: false` чтобы ip автоматически не генерировался и задал собственные значения <br>
![](3.7.png) <br>

7. Для проверки изменений после перезагрузки машины снова вызовем команду `ip route` и увидим, что наш интерфейс стал статическим <br>
![](3.8.1.png)

- Также проверим состояние dns-серверов с помощью команды `resolvectl status` <br>
![](3.8.2.png)

- Пропингуем адреса 1.1.1.1 и ya.ru с помощью команды `ping -c 5 (address)`, установив количественное ограничение отправленных пакетов = 5 <br>
![](3.9.png)


## Part 4. Обновление ОС
 - Успешно обновлены системыне пакеты<br>
![Alt text](./4.png "Optional Title")<br>

## Part 5. Использование команды sudo
- `Sudo – это утилита для операционных систем семейства Linux, позволяющая пользователю запускать программы с привилегиями суперпользователя. Использование sudo позволяет выполнять привилегированные команды обычным пользователям без необходимости ввода пароля суперпользователя root .` <br> 

- Я предоставил новому пользователю права sudo с помощью команды ``sudo usermod -aG sudo second_admin``, где флаг `-a` означает добавление в группу, а `-G` позволяет не удалять пользователя из уже существующих групп. Далее я вошел в другого пользователя и изменил hostname: <br>
![](5.png)

## Part 6. Установка и настройка службы времени
- Вывод команды с корректным временем:<br>
![](6.png)

## Part 7. Установка и использование текстовых редакторов
- В системе уже установлены редакторы VIM и nano, отдельно установим редактор JOE с помощью команды `sudo apt install joe`

1. Выход из файла с сохранением содержимого

    -  Для создания файла в VIM пропишем команду `vim test_VIM.txt`. Для входа в режим редактирования необходимо нажать клавишу `I`, для выхода - `esc`.
    Для выхода из утилиты с сохранением необходимо ввести `:wq` <br>
    ![](7.1.VIM.png)

    - Для создания файла в NANO пропишем команду `nano test_NANO.txt`. Для выхода с cохранением необходимо нажать `CTRL + x`, затем `y` и `enter`. <br>
    ![](7.1.NANO.png)
    
    - Для создания файла в JOE пропишем команду `joe test_JOE.txt`. Для выхода с cохранением необходимо нажать `CTRL + K`, затем `Q` -> `y`. <br>
    ![](7.1.JOE.png)

2. Выход без сохранения

    - Для выхода без сохранения из VIM необходимо написать `:q!`:<br>
    ![](7.2.VIM.png)

    - Для выхода без сохранения из NANO необходимо нажать `CTRL + x`, затем `n`:<br>
    ![](7.2.NANO.png)

    - Для выхода без сохранения из JOE необходимо нажать `CTRL + C`, затем `y`:<br>
    ![](7.2.JOE.png)

3. Поиск по содержимому файла и замена слов

    1. - Для поиска в утилите VIM необходимо ввести `/текст`, который хотим найти: <br>
    ![](7.3.VIM.png)
    
       - Для замены необходимо сделать: `:s/<что хотим изменить>/<на что хотим заменить>`: <br>
       ![](7.4.VIM.png)

    2. - Для поиска в утилите NANO необходимо нажать `CTRL + W`, а затем `enter`:<br>
        ![](7.3.NANO.png)

        - Для замены: `CTRL + \ + <что хотим изменить + enter> + <на что хотим заменить + enter> + A(для замены все вхождения) или y и n по отдельности`: <br>
        ![](7.4.NANO.png)

    3. - Для поиска в утилите NANO необходимо нажать `^K, F -> паттерн для поиска -> I`: <br>
        ![](7.3.JOE.png)

        - Для замены: `^K, F -> что заменить -> R -> на что заменить -> Y`:<br>
        ![](7.4.JOE.png)

## Part 8. Установка и базовая настройка сервиса SSHD

1. Для установки службы SSHd я воспользовался командами _`sudo apt-get install ssh`_ и _`sudo apt install openssh-server`_<br>
2. Для добавления автостарта службы при загрузке системы я использовал команду ___sudo systemctl start ssh___

3. Перенастройка cлужбы SSHd на порт 2022 производилась через редактирование файла sshd_config: `sudo vim /etc/ssh/sshd_config`:<br>
![](8.1.png)

4. Команда ps используется для вывода текущего списка работающих процессов в системе.
Для того, чтобы найти процесс sshd, мы воспользуемся флагом **-e**, который показывает все процессы в системе: <br>
![](8.2.png)
    
5. После перезагрузки системы вызовем команду `netstat -tan`. Значения флагов: <br>
**-a** - Показывает состояние всех сокетов; обычно сокеты, используемые серверными процессами, не показываются. <br>
**-n** - Показывает сетевые адреса как числа. netstat обычно показывает адреса как символы. <br>
**-t** - Отображает TCP подключения <br>
Из этого можно сделать вывод, что команда покажет все текущие TCP-соединения, как числовые значения IP-адресов и портов, включая прослушивающие порты. <br> 
![](8.3.png) <br>
**Proto** - Содержит тип протокола<br>
**Recv-Q** - Счётчик байтов не скопированных программой пользователя из этого сокета.<br>
**Send-Q** - Счётчик байтов, не подтверждённых удалённым узлом.<br>
**Local Address** - Адрес и номер порта локального конца сокета.<br>
**Foreign Address** - Адрес и номер порта удалённого конца сокета.<br>
**State** - Состояние сокета.<br> 
`LISTEN` Сокет ожидает входящих подключений.<br> 
**0.0.0.0** -  это немаршрутизируемый адрес IPv4, который используется в качестве адреса по умолчанию или адреса-заполнителя.

## Part 9. Установка и использование утилит top, htop
1. Вывод команды top:
    - Uptime (время после загрузки): 39 min<br>
    - 1 user<br>
    - Общая загрузка системы (load average): 0.00, 0.00, 0.00<br>
    - Общее количество процессов (tasks): 96 total<br>
    - Загрузка CPU: %CPU(s): 0,0 us, 0,0 sy, 0,0 ni, 100,0 id, 0,2 wa, 0,0 si, 0,0 st <br>
    - Загрузка MEM (MiB Mem): 1971,6 total 1360,1 free 145 used: 466.5 buff/cache<br>
    - PID процесса, занимающего больше памяти - 1392 (сортируем клавишей М)<br>
    - PID процесса, занимающего больше всего процессорного времени - 1383 (root)<br>

2. Вывод команды htop (для сортировки используем клавишу **f6** и выбираем необходимый параметр):<br>
    - ``Сортировка по PID``<br>
    ![Alt text](9.1.png "Optional Title")<br><br>
    - ``Сортировка по PERCENT_CPU``<br>
    ![Alt text](9.2.png "Optional Title")<br><br>
    - ``Сортировка по PERCENT_MEM``<br>
    ![Alt text](9.3.png "Optional Title")<br><br>
    - ``Сортировка по TIME``<br>
    ![Alt text](9.4.png "Optional Title")<br><br>
    - ``Фильтр по процессу sshd (клавиша f4)``<br>
    ![Alt text](9.5.png "Optional Title")<br><br>
    - ``Поиск процесса syslog (клавиша f3)``<br>
    ![Alt text](9.6.png "Optional Title")<br><br>
    - ``Добавлен вывод hostname, clock и uptime (клавиша f2)``<br>
    ![Alt text](9.7.png "Optional Title")<br><br>

## Part 10. Использование утилиты fdisk
- Disk /dev/sda, size: 10 GiB, 10737418240 bytes, 20971520 sectors<br>
![Alt text](10.1.png "Optional Title")<br><br>
- Чтобы узнать размер swap, можно использовать команду `free -h`, флаг **-h** нужен для преобразования размера в удобный для чтения вид. Размер swap 1,4 Gb:<br>
![Alt text](10.2.png "Optional Title")<br>

## Part 11. Использование утилиты df
1. Запустить команду df. <br>
Единица измерения в выводе - **байты**<BR>
![](11.1.png)


2. Запустить команду df -Th. <br>
Файловая система в выводе - ext4 <br>
![](11.2.png)

## Part 12. Использование утилиты du
1. Вывод размера папок /home, /var, /var/log (в байтах, в человекочитаемом виде). Для нахождения суммарного размера вложенных файлов испольуем флаг **-s**, а для приведения к удобному выводу размера - флаг **-h** <br>
![](12.1.png)


2. Вывод размера всего содержимого в /var/log <br>
![](12.2.png)


## Part 13. Установка и использование утилиты ncdu

1. Установим утилиту с помощью команды `sudo apt install ncdu`

2. - Вывод размера папки /home <br>
    ![](13.1.png)

    - Вывод размера папки /var <br>
    ![](13.2.png)

    - Вывод размера папки /var/log <br>
    ![](13.3.png)

## Part 14. Работа с системными журналами
1. Открыть для просмотра:<br>
    - sudo vim /var/log/dmesg <br>
    - sudo vim /var/log/syslog <br>
    - sudo vim /var/log/auth.log <br>

2.  Время последней успешной авторизации - 01:08:21 <br>
Имя пользователя - biffobel <br>
Метод входа в систему - by LOGIN (uid=0) <br>

3. Перезапуск SSHd - `sudo systemctl restart ssh`
    Подтверждение можно найти в файле /var/log/syslog <br>
    ![](14.png)

## Part 15. Использование планировщика заданий CRON
1. Используя планировщик заданий, запустите команду uptime через каждые 2 минуты. С помощью команды `crontab -e` отредактируем планировщик задач: <br>
![](15.1.png)

2. Найдем в системных журналах строчки о выполнении (файл var/log/syslog):<br>
![](15.2.png)

3. Выведем список активных задач: <br>
![](15.3.png)
4. Удалим все задания из планировщика заданий:<br>
![](15.4.png)
